{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service 'AuthService' responsible for authentication-related operations such as login, logout, password resets, and retrieving user dashboard data. It manages authentication tokens locally and communicates with backend APIs using HttpClient.", "external_files": ["../../environments/environment", "@angular/core", "@angular/common/http", "rxjs", "./api-types"], "external_methods": ["HttpClient.post()", "HttpClient.get()", "BehaviorSubject.asObservable()", "localStorage.setItem()", "localStorage.getItem()", "localStorage.removeItem()", "rxjs.pipe()", "rxjs.catchError()", "rxjs.tap()", "rxjs.throwError()"], "published": ["AuthService", "AuthService.loggedIn$", "AuthService.login", "AuthService.forgotPassword", "AuthService.resetPassword", "AuthService.logout", "AuthService.getDashboard", "AuthService.getToken", "AuthService.isLoggedIn"], "classes": [{"name": "AuthService", "description": "An Angular injectable service that manages user authentication state, communicates with backend for auth operations, and handles JWT token storage."}], "methods": [{"name": "login(payload: LoginRequest): Observable<LoginResponse> { login", "description": "Sends login credentials to backend, stores received token if successful, and manages login state.", "scope": "AuthService", "scopeKind": "class"}, {"name": "forgotPassword(payload: ForgotPasswordRequest): Observable<ForgotPasswordResponse> { forgotPassword", "description": "Initiates password reset process by contacting backend API.", "scope": "AuthService", "scopeKind": "class"}, {"name": "resetPassword(payload: ResetPasswordRequest): Observable<ResetPasswordResponse> { resetPassword", "description": "Resets user password via backend API using provided reset token.", "scope": "AuthService", "scopeKind": "class"}, {"name": "logout(): Observable<LogoutResponse> { logout", "description": "Logs out the user by invalidating token on backend and clearing local state.", "scope": "AuthService", "scopeKind": "class"}, {"name": "getDashboard(): Observable<DashboardResponse> { getDashboard", "description": "Retrieves dashboard data for the logged-in user.", "scope": "AuthService", "scopeKind": "class"}, {"name": "getToken(): string | null { getToken", "description": "Returns current JWT token if available.", "scope": "AuthService", "scopeKind": "class"}, {"name": "isLoggedIn(): boolean { isLoggedIn", "description": "Boolean indicating whether the user is currently authenticated.", "scope": "AuthService", "scopeKind": "class"}, {"name": "private apiUrl(path: string): string { apiUrl", "description": "Constructs full API URL from base URL and relative path.", "scope": "AuthService", "scopeKind": "class"}, {"name": "private setToken(token: string): void { setToken", "description": "Stores JWT token in memory and local storage.", "scope": "AuthService", "scopeKind": "class"}, {"name": "private clearToken(): void { clearToken", "description": "Removes JWT token from memory and local storage.", "scope": "AuthService", "scopeKind": "class"}, {"name": "private readTokenFromStorage(): string | null { readTokenFromStorage", "description": "Reads JWT token from local storage.", "scope": "AuthService", "scopeKind": "class"}, {"name": "private hasToken(): boolean { hasToken", "description": "Checks existence of token in memory or local storage.", "scope": "AuthService", "scopeKind": "class"}, {"name": "function errorMessageFrom(err: ErrorResponse): string { errorMessageFrom", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private readonly loggedInSubject = new BehaviorSubject<boolean>(this.hasToken()); this", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "function toErrorResponse(err: unknown): ErrorResponse { toErrorResponse", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["this.http.post()", "this.http.get()", "this.readTokenFromStorage()", "localStorage.setItem()", "localStorage.getItem()", "localStorage.removeItem()", "this.loggedInSubject.next()", "toErrorResponse()", "errorMessageFrom()"], "search-terms": ["AuthService", "JWT token management", "Angular authentication service", "login", "logout", "password reset", "dashboard API", "localStorage handling", "error handling"], "state": 2, "file_id": 4, "knowledge_revision": 28, "git_revision": "572d1492b8f8014349a5049ff496bf53090f88a6", "ctags": [{"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^export class AuthService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "TOKEN_STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^const TOKEN_STORAGE_KEY = 'sample_login_jwt';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "anyErr", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  const anyErr = err as any;$/", "language": "TypeScript", "kind": "constant", "scope": "toErrorResponse", "scopeKind": "function"}, {"_type": "tag", "name": "anyErr", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  const status: number | undefined = typeof anyErr?.status === 'number' ? anyErr.status : undefi/", "language": "TypeScript", "kind": "constant", "scope": "toErrorResponse", "scopeKind": "function"}, {"_type": "tag", "name": "apiError", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  const apiError = anyErr?.error;$/", "language": "TypeScript", "kind": "constant", "scope": "toErrorResponse", "scopeKind": "function"}, {"_type": "tag", "name": "apiUrl", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private apiUrl(path: string): string {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^    const base = environment.apiBaseUrl.replace(\\/\\\\\\/+$\\/, '');$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.apiUrl", "scopeKind": "method"}, {"_type": "tag", "name": "clearToken", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private clearToken(): void {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "er", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^        const er = toErrorResponse(err);$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.forgotPassword", "scopeKind": "method"}, {"_type": "tag", "name": "er", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^        const er = toErrorResponse(err);$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.getDashboard", "scopeKind": "method"}, {"_type": "tag", "name": "er", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^        const er = toErrorResponse(err);$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.login", "scopeKind": "method"}, {"_type": "tag", "name": "er", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^        const er = toErrorResponse(err);$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.logout", "scopeKind": "method"}, {"_type": "tag", "name": "er", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^        const er = toErrorResponse(err);$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.resetPassword", "scopeKind": "method"}, {"_type": "tag", "name": "errorMessageFrom", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^function errorMessageFrom(err: ErrorResponse): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "forgotPassword", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  forgotPassword(payload: ForgotPasswordRequest): Observable<ForgotPasswordResponse> {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "getDashboard", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  getDashboard(): Observable<DashboardResponse> {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "getToken", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  getToken(): string | null {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "hasToken", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private hasToken(): boolean {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "isLoggedIn", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  isLoggedIn(): boolean {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "loggedInSubject", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private readonly loggedInSubject = new BehaviorSubject<boolean>(this.hasToken());$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  login(payload: LoginRequest): Observable<LoginResponse> {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  logout(): Observable<LogoutResponse> {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^    const p = path.startsWith('\\/') ? path : `\\/${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.apiUrl", "scopeKind": "method"}, {"_type": "tag", "name": "readTokenFromStorage", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private readTokenFromStorage(): string | null {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "resetPassword", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  resetPassword(payload: ResetPasswordRequest): Observable<ResetPasswordResponse> {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "setToken", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private setToken(token: string): void {$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  const status: number | undefined = typeof anyErr?.status === 'number' ? anyErr.status : undefi/", "language": "TypeScript", "kind": "constant", "scope": "toErrorResponse", "scopeKind": "function"}, {"_type": "tag", "name": "stored", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^    const stored = this.readTokenFromStorage();$/", "language": "TypeScript", "kind": "constant", "scope": "AuthService.this", "scopeKind": "method"}, {"_type": "tag", "name": "this", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private readonly loggedInSubject = new BehaviorSubject<boolean>(this.hasToken());$/", "language": "TypeScript", "kind": "method", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "toErrorResponse", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^function toErrorResponse(err: unknown): ErrorResponse {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "tokenInMemory", "path": "/home/kavia/workspace/code-generation/sample-login-19753-21122/AngularFrontend/src/app/core/auth.service.ts", "pattern": "/^  private tokenInMemory: string | null = null;$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}], "hash": "df984dc2e0c8219b3653cd5195c35f46", "format-version": 4, "code-base-name": "AngularFrontend", "filename": "AngularFrontend/src/app/core/auth.service.ts", "fields": [{"name": "private readonly loggedInSubject = new BehaviorSubject<boolean>(this.hasToken());", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "private tokenInMemory: string | null = null;", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"28": "572d1492b8f8014349a5049ff496bf53090f88a6"}]}